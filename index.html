<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Умный дом</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: #f3f7fb;
      transition: background 0.5s ease;
    }
    body.night {
      background: #0b1220;
    }

    .room {
      position: relative;
      z-index: 0;
    }
    .window {
      position: relative;
      z-index: 5;
      overflow: hidden;
    }
    
    /* Городской пейзаж */
    .city-scape {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
      z-index: 0;
    }
    
    /* Солнце */
    .sun {
      position: absolute;
      left: 70%;
      top: 20%;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: radial-gradient(circle at 50% 50%, #fff59d, #ffcc33 40%, transparent 60%);
      box-shadow: 0 0 40px 5px rgba(255, 204, 51, 0.4);
      z-index: 2;
    }
    
    /* Здания */
    .building {
      position: absolute;
      bottom: 0;
      background: #888;
      border: 1px solid #666;
    }
    
    .building-1 {
      left: 10%;
      width: 60px;
      height: 100px;
      background: linear-gradient(to right, #777, #999);
    }
    
    .building-2 {
      left: 25%;
      width: 80px;
      height: 140px;
      background: linear-gradient(to right, #666, #888);
    }
    
    .building-3 {
      left: 50%;
      width: 50px;
      height: 80px;
      background: linear-gradient(to right, #888, #aaa);
    }
    
    /* Окна на зданиях */
    .window-light {
      position: absolute;
      background: #ffeb3b;
      border: 1px solid #ffc107;
    }
    
    /* Окна на первом здании */
    .building-1 .window-light:nth-child(1) {
      top: 20px;
      left: 10px;
      width: 10px;
      height: 15px;
    }
    
    .building-1 .window-light:nth-child(2) {
      top: 20px;
      right: 10px;
      width: 10px;
      height: 15px;
    }
    
    .building-1 .window-light:nth-child(3) {
      top: 50px;
      left: 10px;
      width: 10px;
      height: 15px;
    }
    
    .building-1 .window-light:nth-child(4) {
      top: 50px;
      right: 10px;
      width: 10px;
      height: 15px;
    }
    
    /* Окна на втором здании */
    .building-2 .window-light:nth-child(1) {
      top: 20px;
      left: 15px;
      width: 12px;
      height: 18px;
    }
    
    .building-2 .window-light:nth-child(2) {
      top: 20px;
      right: 15px;
      width: 12px;
      height: 18px;
    }
    
    .building-2 .window-light:nth-child(3) {
      top: 50px;
      left: 15px;
      width: 12px;
      height: 18px;
    }
    
    .building-2 .window-light:nth-child(4) {
      top: 50px;
      right: 15px;
      width: 12px;
      height: 18px;
    }
    
    .building-2 .window-light:nth-child(5) {
      top: 80px;
      left: 15px;
      width: 12px;
      height: 18px;
    }
    
    .building-2 .window-light:nth-child(6) {
      top: 80px;
      right: 15px;
      width: 12px;
      height: 18px;
    }
    
    /* Окна на третьем здании */
    .building-3 .window-light:nth-child(1) {
      top: 15px;
      left: 8px;
      width: 8px;
      height: 12px;
    }
    
    .building-3 .window-light:nth-child(2) {
      top: 15px;
      right: 8px;
      width: 8px;
      height: 12px;
    }
    
    .building-3 .window-light:nth-child(3) {
      top: 40px;
      left: 8px;
      width: 8px;
      height: 12px;
    }
    
    .building-3 .window-light:nth-child(4) {
      top: 40px;
      right: 8px;
      width: 8px;
      height: 12px;
    }
    
    .curtain {
      position: absolute;
      top: 0;
      width: 50%;
      height: 100%;
      background: linear-gradient(180deg, #b55 0%, #811 100%);
      box-shadow: inset -6px 0 16px rgba(0,0,0,0.25);
      transition: transform 1s cubic-bezier(.22,.9,.34,1);
      z-index: 3;
    }
    .curtain.left {
      left: 0;
      transform: translateX(0);
      transform-origin: left;
    }
    .curtain.right {
      right: 0;
      transform: translateX(0);
      transform-origin: right;
    }
    .curtain.open-left {
      transform: translateX(-110%);
    }
    .curtain.open-right {
      transform: translateX(110%);
    }

    /* Стили для люстры */
    .chandelier {
      position: absolute;
      top: 0;
      left: 60%; /* Переместили правее */
      transform: translateX(-50%);
      width: 200px;
      height: 100px;
      z-index: 25;
    }

    .chandelier-chain {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      height: 20px;
      background: #555;
    }

    .chandelier-base {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 12px;
      background: linear-gradient(to bottom, #444, #222);
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    /* Улучшенная люстра */
    .chandelier-body {
      position: absolute;
      top: 32px;
      left: 50%;
      transform: translateX(-50%);
      width: 90px;
      height: 50px;
      background: radial-gradient(ellipse at center, #333 0%, #111 100%);
      border-radius: 50% 50% 40% 40%;
      box-shadow: 0 3px 6px rgba(0,0,0,0.4);
    }

    /* Декоративные элементы люстры */
    .chandelier-decor {
      position: absolute;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 8px;
      background: linear-gradient(to right, transparent, #666, transparent);
      border-radius: 4px;
    }

    .chandelier-arm {
      position: absolute;
      top: 50px;
      width: 60px;
      height: 3px;
      background: linear-gradient(to right, #555, #333);
      border-radius: 2px;
    }

    .chandelier-arm.left {
      left: 20px;
      transform: rotate(-35deg);
      transform-origin: left top;
    }

    .chandelier-arm.right {
      right: 20px;
      transform: rotate(35deg);
      transform-origin: right top;
    }

    .chandelier-holder {
      position: absolute;
      width: 8px;
      height: 15px;
      background: linear-gradient(to bottom, #666, #444);
      border-radius: 0 0 4px 4px;
    }

    .chandelier-holder.left {
      top: 55px;
      left: 10px;
      transform: rotate(-35deg);
    }

    .chandelier-holder.right {
      top: 55px;
      right: 10px;
      transform: rotate(35deg);
    }

    .chandelier-holder.center {
      top: 65px;
      left: 50%;
      transform: translateX(-50%);
    }

    .chandelier-chain-small {
      position: absolute;
      width: 1px;
      background: #777;
    }

    .chandelier-chain-small.left {
      top: 55px;
      left: 14px;
      height: 12px;
      transform: rotate(-35deg);
    }

    .chandelier-chain-small.right {
      top: 55px;
      right: 14px;
      height: 12px;
      transform: rotate(35deg);
    }

    .chandelier-chain-small.center {
      top: 65px;
      left: 50%;
      transform: translateX(-50%);
      height: 15px;
    }

    .chandelier-bulb {
      position: absolute;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #2f2f2f;
      box-shadow: inset -4px -4px 8px rgba(255,255,255,0.03);
      transition: background 450ms ease, box-shadow 450ms ease;
      z-index: 30;
    }

    .chandelier-bulb.left {
      top: 65px;
      left: 12px;
    }

    .chandelier-bulb.right {
      top: 65px;
      right: 11px;
    }

    .chandelier-bulb.center {
      top: 78px;
      left: 50%;
      transform: translateX(-50%);
    }

    .chandelier-bulb.on {
      background: radial-gradient(circle at 35% 30%, #fff9d6, #ffd54d 40%, #ffb300 60%);
      box-shadow: 0 0 25px 5px rgba(255,200,60,0.3);
    }

    /* Свечения для лампочек */
    .chandelier-glow {
      position: absolute;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      opacity: 0;
      filter: blur(15px);
      transition: opacity 400ms ease;
      pointer-events: none;
      background: radial-gradient(circle at 50% 30%, rgba(255,235,140,0.8), rgba(255,200,60,0.1) 60%);
      z-index: 24;
    }

    .chandelier-glow.left {
      top: 65px;
      left: 12px;
      transform: translate(-50%, -50%);
    }

    .chandelier-glow.right {
      top: 65px;
      right: 11px;
      transform: translate(50%, -50%);
    }

    .chandelier-glow.center {
      top: 90px;
      left: 50%;
      transform: translateX(-50%);
      width: 220px;
      height: 120px;
      filter: blur(20px);
    }

    .chandelier-glow.on {
      opacity: 1;
    }

    .tv-container {
        position: absolute;
        bottom: 60px;
        left: 50%;
        transform: translateX(-50%);
        width: 256px;
        height: 144px;
        z-index: 15;
    }

    .tv {
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      height: 100%;
    }
    .tv-off {
      background: linear-gradient(180deg,#2b2b2b,#111);
      color: #8a8a8a;
    }
    .tv-on {
      background: linear-gradient(180deg,#0b3 10%, #036 90%);
      color: white;
    }

    .tv-screen {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }
    .tv-on .tv-screen {
      display: block;
    }
    .tv-on .screen-text {
      display: none;
    }

    .tv-frame {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 10px solid #000;
      box-sizing: border-box;
      pointer-events: none;
    }

    .tv-stand {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      width: 350px;
      height: 53px;
      background: linear-gradient(180deg, #8B4513, #A0522D, #8B4513);
      border-radius: 8px;
      z-index: 1;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .tv-stand-top {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 30px;
        background: linear-gradient(180deg, #5D2906, #7B3F09);
        border-radius: 8px 8px 0 0;
        box-shadow: inset 0 -2px 4px rgba(0,0,0,0.2);
    }

    .tv-stand-boards {
        position: absolute;
        top: 2px;
        left: 5px;
        right: 5px;
        height: 26px;
        display: flex;
        justify-content: space-between;
    }

    .tv-stand-board {
        width: calc(33% - 4px);
        height: 100%;
        background: linear-gradient(180deg, #7B3F09, #5D2906);
        border-radius: 2px;
    }

    .tv-stand-base {
        position: absolute;
        top: 30px;
        left: 15px;
        right: 15px;
        bottom: 10px;
        background: linear-gradient(180deg, #A0522D, #CD853F);
        border-radius: 4px;
        box-shadow: inset 0 0 8px rgba(0,0,0,0.2);
    }

    .digital-clock {
      position: absolute;
      top: -35px;
      right: 30px;
      width: 100px;
      height: 50px;
      background: #111;
      border-radius: 6px;
      border: 2px solid #333;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
    }

    .time-display {
      font-family: 'Courier New', monospace;
      font-size: 18px;
      font-weight: bold;
      color: #0f0;
      text-shadow: 0 0 8px rgba(0, 255, 0, 0.7);
      letter-spacing: 1px;
    }

    @media (max-width: 768px) {
      .room {
        height: 360px;
      }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

  <div class="w-full max-w-5xl grid grid-cols-1 md:grid-cols-3 gap-6">
    <aside class="md:col-span-1 bg-white/80 dark:bg-gray-900/60 backdrop-blur rounded-2xl p-5 shadow-lg">
      <h2 class="text-xl font-semibold mb-3">Smart Home Controls</h2>

      <div class="space-y-3">
        <button id="btn-curtains" class="w-full py-2 rounded-lg border hover:scale-[1.01] transition-transform">
          Закрыть шторы
        </button>

        <button id="btn-lights" class="w-full py-2 rounded-lg border hover:scale-[1.01] transition-transform">
          Включить свет
        </button>

        <button id="btn-tv" class="w-full py-2 rounded-lg border hover:scale-[1.01] transition-transform">
          Включить ТВ
        </button>

        <!-- Кнопка для выключения часов -->
        <button id="btn-clock" class="w-full py-2 rounded-lg border hover:scale-[1.01] transition-transform">
          Выключить часы
        </button>

        <div class="flex gap-2 mt-2">
          <button id="btn-morning" class="flex-1 py-2 rounded-lg bg-yellow-400 hover:opacity-90">
            Утро
          </button>
          <button id="btn-evening" class="flex-1 py-2 rounded-lg bg-indigo-600 text-white hover:opacity-90">
            Вечер
          </button>
        </div>

      
      </div>
    </aside>

    <main class="md:col-span-2 bg-gradient-to-b from-white/60 to-transparent rounded-2xl p-6 relative overflow-hidden shadow-xl">
      <div class="flex items-start gap-6">
        <div class="flex-1">
          <div id="room" class="room relative rounded-xl p-6 h-[420px] transition-all duration-700 bg-[#eaf2ff] text-black">
            <!-- Окно с городским пейзажем -->
            <div class="window absolute left-12 top-12 w-72 h-52 bg-gradient-to-b from-sky-200 to-white rounded-lg shadow-inner overflow-hidden">
              <!-- Городской пейзаж -->
              <div class="city-scape">
                <div class="sun"></div>
                <div class="building building-1">
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                </div>
                <div class="building building-2">
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                </div>
                <div class="building building-3">
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                  <div class="window-light"></div>
                </div>
              </div>
              <div class="curtain left open-left"></div>
              <div class="curtain right open-right"></div>
            </div>

            <!-- Люстра -->
            <div class="chandelier">
              <div class="chandelier-chain"></div>
              <div class="chandelier-base"></div>
              <div class="chandelier-body"></div>
              <div class="chandelier-decor"></div>
              <div class="chandelier-arm left"></div>
              <div class="chandelier-arm right"></div>
              <div class="chandelier-holder left"></div>
              <div class="chandelier-holder right"></div>
              <div class="chandelier-holder center"></div>
              <div class="chandelier-chain-small left"></div>
              <div class="chandelier-chain-small right"></div>
              <div class="chandelier-chain-small center"></div>
              <div class="chandelier-bulb left"></div>
              <div class="chandelier-bulb right"></div>
              <div class="chandelier-bulb center"></div>
              <!-- Свечения для всех лампочек -->
              <div class="chandelier-glow left"></div>
              <div class="chandelier-glow right"></div>
              <div class="chandelier-glow center"></div>
            </div>

            <div class="tv-container">
                <div class="tv tv-off">
                    <div class="tv-frame"></div>
                    <img src="https://cdn.maximonline.ru/91/26/c4/9126c445ee6e097754b5fdf471e47874/416x257_0xac120005_2938080411529046295.gif" alt="TV Screen" class="tv-screen">
                    <div class="screen-text flex items-center justify-center text-sm font-medium h-full">ТВ — выкл.</div>
                </div>
                <div class="tv-stand">
                    <div class="tv-stand-top">
                        <div class="tv-stand-boards">
                            <div class="tv-stand-board"></div>
                            <div class="tv-stand-board"></div>
                            <div class="tv-stand-board"></div>
                        </div>
                    </div>
                    <div class="tv-stand-base"></div>
                    <!-- Цифровые часы справа на столике -->
                    <div class="digital-clock">
                        <div class="time-display" id="time-display">00:00:00</div>
                    </div>
                </div>
            </div>

          </div>

          <div class="mt-4 grid grid-cols-2 gap-2">
            <div id="status-curtains" class="p-3 rounded-lg bg-white/70 dark:bg-gray-800/60">Шторы: Открыты</div>
            <div id="status-lights" class="p-3 rounded-lg bg-white/70 dark:bg-gray-800/60">Свет: Выключен</div>
            <div id="status-tv" class="p-3 rounded-lg bg-white/70 dark:bg-gray-800/60">ТВ: Выкл.</div>
            <div id="status-clock" class="p-3 rounded-lg bg-white/70 dark:bg-gray-800/60">Часы: Работают</div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);

    const btnCurtains = $('#btn-curtains');
    const btnLights = $('#btn-lights');
    const btnTv = $('#btn-tv');
    const btnMorning = $('#btn-morning');
    const btnEvening = $('#btn-evening');
    // Удалены несуществующие элементы
    const room = $('#room');
    const sun = $('.sun');
    const curtainLeft = $('.curtain.left');
    const curtainRight = $('.curtain.right');
    // Элементы люстры
    const chandelierBulbs = $$('.chandelier-bulb');
    // Все элементы свечения
    const chandelierGlows = $$('.chandelier-glow');
    const tv = $('.tv');
    const timeDisplay = $('#time-display');

    const statusCurtains = $('#status-curtains');
    const statusLights = $('#status-lights');
    const statusTv = $('#status-tv');
    const statusClock = $('#status-clock');

    // Изначально шторы открыты
    let curtainsOpen = true;
    let lightsOn = false;
    let tvOn = false;
    let theme = 'day';
    let soundEnabled = true;
    // Новое состояние для часов
    let clockOn = true;
    let clockInterval = null;

    function playSound(src) {
      if (!soundEnabled) return;
      try {
        const audio = new Audio(src);
        audio.volume = 0.6;
        audio.play().catch(() => {});
      } catch (e) {
        console.warn('Audio error', e);
      }
    }

    function updateClock() {
      if (!clockOn) return; // Не обновляем, если часы выключены
      const now = new Date();
      const hours = now.getHours().toString().padStart(2, '0');
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const seconds = now.getSeconds().toString().padStart(2, '0');
      timeDisplay.textContent = `${hours}:${minutes}:${seconds}`;
    }

    // Функция для запуска/остановки часов
    function toggleClock() {
        clockOn = !clockOn;
        if (clockOn) {
            // Включаем часы
            btnClock.textContent = 'Выключить часы';
            timeDisplay.style.opacity = "1";
            clockInterval = setInterval(updateClock, 1000);
            statusClock.textContent = `Часы: Работают`;
        } else {
            // Выключаем часы
            btnClock.textContent = 'Включить часы';
            timeDisplay.style.opacity = "0.3";
            clearInterval(clockInterval);
            statusClock.textContent = `Часы: Выключены`;
        }
    }

    function updateUI() {
      btnCurtains.textContent = curtainsOpen ? 'Закрыть шторы' : 'Открыть шторы';
      btnLights.textContent = lightsOn ? 'Выключить свет' : 'Включить свет';
      btnTv.textContent = tvOn ? 'Выключить ТВ' : 'Включить ТВ';
      // Состояние часов обновляется в toggleClock

      curtainLeft.classList.toggle('open-left', curtainsOpen);
      curtainRight.classList.toggle('open-right', curtainsOpen);
      sun.style.opacity = curtainsOpen ? '1' : '0.3';

      // Управление люстрой
      chandelierBulbs.forEach(bulb => {
        bulb.classList.toggle('on', lightsOn);
      });
      // Управление свечением всех лампочек
      chandelierGlows.forEach(glow => {
        glow.classList.toggle('on', lightsOn);
      });

      tv.classList.toggle('tv-on', tvOn);
      tv.classList.toggle('tv-off', !tvOn);
      const screenText = $('.tv .screen-text');
      if (tvOn) {
        screenText.textContent = '';
      } else {
        screenText.textContent = 'ТВ — выкл.';
      }

      statusCurtains.textContent = `Шторы: ${curtainsOpen ? 'Открыты' : 'Закрыты'}`;
      statusLights.textContent = `Свет: ${lightsOn ? 'Включён' : 'Выключен'}`;
      statusTv.textContent = `ТВ: ${tvOn ? 'Вкл.' : 'Выкл.'}`;
      // Статус часов обновляется в toggleClock
    }

    // Проверяем существование элементов перед добавлением обработчиков
    if (btnCurtains) {
      btnCurtains.addEventListener('click', () => {
        curtainsOpen = !curtainsOpen;
        
        if (!curtainsOpen) {
          document.body.classList.add('night');
          room.classList.remove('bg-[#eaf2ff]', 'text-black');
          room.classList.add('bg-[#0b1320]', 'text-white');
        } else {
          if (!lightsOn) {
            document.body.classList.remove('night');
            room.classList.remove('bg-[#0b1320]', 'text-white');
            room.classList.add('bg-[#eaf2ff]', 'text-black');
          }
        }
        
        playSound(curtainsOpen ? '/sounds/curtain-open.mp3' : '/sounds/curtain-close.mp3');
        updateUI();
      });
    }

    if (btnLights) {
      btnLights.addEventListener('click', () => {
        lightsOn = !lightsOn;
        
        if (lightsOn) {
          document.body.classList.remove('night');
          room.classList.remove('bg-[#0b1320]', 'text-white');
          room.classList.add('bg-[#eaf2ff]', 'text-black');
        } 
        else if (!curtainsOpen) {
           document.body.classList.add('night');
           room.classList.remove('bg-[#eaf2ff]', 'text-black');
           room.classList.add('bg-[#0b1320]', 'text-white');
        }
        
        playSound('/sounds/switch.mp3');
        updateUI();
      });
    }

    if (btnTv) {
      btnTv.addEventListener('click', () => {
        tvOn = !tvOn;
        playSound('/sounds/tv-toggle.mp3');
        updateUI();
      });
    }

    // Обработчик для кнопки выключения часов
    const btnClock = $('#btn-clock');
    if (btnClock) {
      btnClock.addEventListener('click', () => {
          toggleClock();
          // playSound('/sounds/switch.mp3'); // Можно добавить звук
      });
    }

    if (btnMorning) {
      btnMorning.addEventListener('click', () => {
        curtainsOpen = true;
        lightsOn = false;
        tvOn = false;
        // При утреннем режиме включаем часы
        if (!clockOn) toggleClock();
        
        document.body.classList.remove('night');
        room.classList.remove('bg-[#0b1320]', 'text-white');
        room.classList.add('bg-[#eaf2ff]', 'text-black');
        
        playSound('/sounds/morning.mp3');
        updateUI();
      });
    }

    if (btnEvening) {
      btnEvening.addEventListener('click', () => {
        curtainsOpen = false;
        lightsOn = true;
        tvOn = true;
        // При вечернем режиме включаем часы
        if (!clockOn) toggleClock();
        
        document.body.classList.add('night');
        room.classList.remove('bg-[#eaf2ff]', 'text-black');
        room.classList.add('bg-[#0b1320]', 'text-white');
        
        playSound('/sounds/evening.mp3');
        updateUI();
      });
    }

    // Инициализация часов
    updateClock();
    clockInterval = setInterval(updateClock, 1000);

    // Изначально шторы открыты
    updateUI();
  </script>
</body>
</html>